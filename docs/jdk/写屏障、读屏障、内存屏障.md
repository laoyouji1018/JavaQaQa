## 写屏障

### 维护卡表

​		记忆集记录跨代引用关系，减少`GC Roots`的扫描范围，而卡表是记忆集的具体实现之一。当其他分代区域中对象引用了本区域对象时，其对应的卡表元素就应该变脏，变脏时间点原则上应该发生在引用类型字段赋值的那一刻，在HotSpot虚拟机里是通过写屏障(Write Barrier)技术维护卡表状态的，写屏障可以看作在虚拟机层面对“引用类型字段赋值”这个动作的AOP切面，在引用对象赋值时会产生一个环形(Around)通知，供程序执行额外的动作，也就是说赋值的前后都在写屏障的覆盖范畴内。

### 实现并发标记

**增量更新**

> ​		当黑色对象插入新的指向白色对象的引用关系时，就将这个新插入的引用记录下来

**原始快照**

> ​		当灰色对象要删除指向白色对象的引用关系时，就将这个要删除的引用记录下来

​		以上无论是对引用关系记录的插入还是删除，虚拟机的记录操作都是通过写屏障实现的

## 读屏障

​		Shenandoah收集器，并发回收阶段（并发复制对象），保证愿对象与复制对象访问的一致性

